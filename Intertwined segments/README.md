```markdown
# Переплетенные отрезки

**Ограничение времени**: 2 секунды  
**Ограничение памяти**: 256Mb  
**Ввод**: стандартный ввод или `input.txt`  
**Вывод**: стандартный вывод или `output.txt`

## Условие задачи
Необходимо посчитать количество пар отрезков (Матриц), где:
- Один отрезок полностью содержится внутри другого
- Их границы не совпадают (строгое вложение)

## Формат ввода
1. n - количество отрезков (1 ≤ n ≤ 300000)
2. n пар чисел lᵢ rᵢ - границы отрезков (0 ≤ lᵢ ≤ rᵢ ≤ 10⁹)

## Формат вывода
Одно число - количество пар вложенных отрезков

## Пример
**Ввод**  
```
4
1 4
2 5
1 3
3 4
``

**Вывод**  
```
3
```

## Решение
1. **Сортировка отрезков**:
   - По возрастанию левой границы
   - При равных левых границах - по убыванию правой

2. **Использование дерева Фенвика**:
   - Для подсчета количества отрезков, содержащих текущий
   - Обновление и запросы за O(log n)

3. **Алгоритм**:
   - Отсортировать отрезки
   - Пройти по отрезкам справа налево
   - Для каждого отрезка находить количество отрезков с:
     - lⱼ ≤ lᵢ
     - rⱼ ≥ rᵢ
     - (lⱼ, rⱼ) ≠ (lᵢ, rᵢ)

**Сложность**: O(n log n)

**Примечание**: Для больших n (3·10⁵) важно использовать эффективные структуры данных.